<?php

namespace AppBundle\Repository;
use AppBundle\Entity\lekarz;
use AppBundle\Entity\wizyta;

/**
 * wizytaRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class wizytaRepository extends \Doctrine\ORM\EntityRepository
{
    public function getEventsByDate($start, $end){
        $q=$this->getEntityManager()->createQuery('
        SELECT wizyta FROM AppBundle:wizyta wizyta
        WHERE wizyta.data
        BETWEEN :startData AND :endData
        ')
            ->setParameter('startData',$start)
            ->setParameter('endData',$end)
            ->getResult();
        return $q;
    }
    public function getWizytaByIdLekarzDate(lekarz $lekarz, $start, $end){

        $q=$this->getEntityManager()->createQuery('
        SELECT wizyta
        FROM AppBundle:wizyta AS wizyta
        WHERE wizyta.data 
        BETWEEN :startData AND :endData
        AND wizyta.idLekarz = :lekarz
        ')->setParameter('startData',$start)
            ->setParameter('endData',$end)
            ->setParameter('lekarz',$lekarz->getId())
            ->getResult();
        return $q;
    }
}
